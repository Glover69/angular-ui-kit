<!-- date-picker.component.html -->
<div class="date-picker-wrapper w-full flex flex-col items-start gap-2">
  <!-- Label -->
  <label class="block text-sm text-gray-700 tracking-tight">
    {{ label }}
  </label>
  
  <!-- Input trigger -->
  <div 
    (click)="toggleCalendar()"
    class="relative w-full px-3 py-2 border border-gray-300 shadow-xs rounded-lg 
           focus-within:ring-2 focus-within:ring-primary focus-within:border-transparent
           bg-white cursor-pointer flex items-center justify-between">
    
    <span class="text-gray-500 text-base md:text-sm font-regular">
      {{ formatDisplayDate() }}
    </span>
    
    <i class="ph ph-calendar-dots text-lg"></i>
  </div>
  
 <!-- Calendar dropdown -->
@if (isOpen) {
  <!-- Backdrop -->
  <div 
    (click)="closeCalendar()"
    class="fixed inset-0 bg-[#00000060] z-40">
  </div>
  
  <!-- Drawer -->
  <div #drawer [ngClass]="fullWidth ? 'lg:w-full max-h-[50vh]' : 'lg:w-2/5 max-h-[80vh]'" class="drawer border border-gray-300 border-b-0 rounded-tl-lg justify-self-center rounded-tr-lg fixed bottom-0 left-0 right-0 z-50 bg-white flex flex-col lg:items-center">
    <!-- Calendar header -->
    <div class="flex w-full items-center justify-between p-4 border-b border-gray-300 flex-shrink-0">
      <button 
        type="button"
        (click)="previousMonth()"
        class="px-2 py-1 cursor-pointer hover:bg-gray-100 rounded-md">
        <span class="ph ph-arrow-left"></span>
      </button>
      
      <span class="text-base font-semibold text-gray-700">
        {{ months[currentMonth.getMonth()] }} {{ currentMonth.getFullYear() }}
      </span>
      
      <button 
        type="button"
        (click)="nextMonth()"
        class="px-2 py-1 cursor-pointer hover:bg-gray-100 rounded-md">
        <span class="ph ph-arrow-right"></span>
      </button>
    </div>
    
    <!-- Calendar grid -->
    <div class="flex-1 w-full overflow-y-auto p-4">
      <div class="max-w-md mx-auto">
        <!-- Week day headers -->
        <div class="grid grid-cols-7 gap-1 mb-2">
          @for (day of weekDays; track day) {
            <div class="text-center text-sm font-semibold text-black py-2">
              {{ day }}
            </div>
          }
        </div>
        
        <!-- Calendar days -->
        <div class="grid grid-cols-7 gap-1">
          @for (day of getDaysInMonth(); track $index) {
            <button
              type="button"
              (click)="selectDate(day)"
              [disabled]="!day"
              [class]="day ? 'hover:bg-gray-100' : ''"
              class="h-10 cursor-pointer flex items-center justify-center text-sm rounded-md transition-colors
                     disabled:cursor-default disabled:hover:bg-transparent"
              [class.bg-brand-600]="isSelectedDate(day)"
              [class.text-white]="isSelectedDate(day)"
              [class.font-semibold]="isSelectedDate(day)"
              [class.text-gray-700]="day && !isSelectedDate(day)">
              {{ day }}
            </button>
          }
        </div>
      </div>
    </div>
    
    <!-- Footer buttons -->
    <div class="flex w-full gap-3 p-4 border-t border-gray-300 flex-shrink-0">
      <app-button class="w-full" text="Cancel" [type]="'button'" hierarchy="secondary" (clicked)="closeCalendar()"></app-button>
      <app-button class="w-full" text="Done" [type]="'button'" hierarchy="primary" (clicked)="closeCalendar()"></app-button>
    </div>
  </div>
}
</div>
